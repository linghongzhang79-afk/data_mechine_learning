
## 1. 项目基本信息

- 小组编号：323
- 课题名称：东京房源评论与口碑对房源表现的影响
- 选定城市及范围：Tokyo
- 选定时间范围：2025-1~2026-1
- 所用数据表：Listings / Calendar Rates / Reviews（勾选或列出实际使用的表）
- 项目 Github 仓库地址：https://github.com/ZJUT-CS/ml-course-project-2025-323?tab=readme-ov-file

### 1.1 小组成员与角色分工（固定 4 人）

> 建议角色：  
> - **EDA 负责人**：整体探索分析与可视化  
> - **建模负责人**：特征工程与模型选择调参  
> - **代码负责人**：项目结构、数据处理与训练脚本、可复现性  
> - **展示与写作负责人**：汇总结论、PPT、报告撰写与润色  

| 成员   | 姓名 | 学号 | GitHub 用户名 | 主要负责内容（简要）      |
|--------|------|------|---------------|---------------------------|
| 学生 1 | 杨弼程     | 302023562039     |  ybcsama             | 代码&数据&EDA   |
| 学生 2 | 田家乐      |302023562045      |  tianjialeabc              |代码&报告&PPT                        |
| 学生 3 | 肖扬     | 302023562027      |  hpsheep              |    代码&特征工程&建模    |
| 学生 4 | 洪琛    | 302023562031     | MoriyaSuwako1              |  工程实现&代码   |

---

## 2. 问题背景与数据集说明

### 2.1 业务背景与研究问题

Airbnb 作为一个全球性的短租平台，房源的表现（如入住率、收入等）直接影响房东的收益和平台的整体运营效率。在竞争激烈的市场中，房源的口碑和评论数量被认为是影响其表现的重要因素之一。房东和平台管理者希望通过了解评论和评分对房源表现的实际影响，制定更好的运营策略。

本项目要解决的核心问题：

这是一个分类任务，旨在预测房源是否为"高收益房源"
目标变量是：是否为高收益房源（基于RevPAR的四分位数划分，Top 25%为高收益）
使用评分、评论数量等口碑指标作为特征，预测房源的收益表现
研究该问题对平台/房东/房客的价值：

对房东：了解哪些口碑因素最重要，从而有针对性地改善房源和服务
对平台：优化推荐算法，识别有潜力的房源，制定运营策略
对房客：了解评分体系的可靠性，提升选房体验
### 2.2 数据来源与筛选规则

数据来源：AirROI Data Portal（https://www.airroi.com/data-portal/）

所使用的数据表及其作用：

Listings Data：房源静态特征 + 近 90 天 / 过去一年表现字段。包含评分、评论数、RevPAR等关键指标。
样本量与筛选条件：

初始样本量：约1000+条房源数据
筛选规则：去除缺失严重样本，过滤极端值，确保数据质量
核心特征说明：

rating_overall：整体评分，预期对收益有正面影响
rating_cleanliness：清洁度评分，对用户体验至关重要
rating_location：位置评分，影响入住意愿
rating_value：性价比评分，直接影响预订决策
rating_communication：沟通评分，影响预订过程体验
rating_checkin：入住体验评分
rating_accuracy：描述准确性评分
total_reviews：评论总数，反映房源活跃度和可信度
ttm_revpar：过去12个月的每可供房晚收入，目标变量
ttm_occupancy：过去12个月的入住率
### 2.3 预期目标与分析思路

项目的预期输出：
识别对房源收益表现影响最大的口碑因素
构建分类模型预测房源是否为高收益房源
生成"高收益房源画像"，为房东提供改进建议
量化评论数量和评分的联合影响

项目的预期输出：
识别对房源收益表现影响最大的口碑因素
构建分类模型预测房源是否为高收益房源
生成"高收益房源画像"，为房东提供改进建议

计划采用的技术路径：
先 EDA：探索评分与表现的相关性，分析评论数量与评分的联合影响
再建模：使用逻辑回归和XGBoost模型进行高收益房源预测
最后可视化与解释：展示特征重要性，分析模型结果的业务含义

---

## 3. 方法与模型设计

### 3.1 数据预处理与特征工程

缺失值处理方式：删除在关键特征列中有缺失值的样本
异常值处理：通过四分位数方法识别并处理极端值
特征工程：
连续变量：对ttm_revpar使用四分位数划分生成二分类目标变量（Top 25%为高收益）
类别变量：无需特殊编码
派生特征：无额外派生特征
### 3.2 模型选择与设计
模型列表：
线性模型：LogisticRegression（基线模型）
树模型：XGBoost（改进模型）

每类模型的优缺点及其适用性：
逻辑回归：优点是可解释性强，训练速度快，适合线性关系；缺点是对非线性关系建模能力有限，适合当前评分与收益的简单关系建模
XGBoost：优点是非线性拟合能力强，自动处理特征交互，鲁棒性好；缺点是可解释性稍差，训练时间较长，适合捕捉评分与收益间的复杂关系
### 3.3 超参数设置与训练细节

各模型的关键超参数：

逻辑回归：max_iter=1000, class_weight='balanced'
XGBoost：n_estimators=100, learning_rate=0.1, max_depth=5, subsample=0.8, colsample_bytree=0.8
调参方法：

使用默认参数设置
交叉验证设置：5折交叉验证
训练环境与实现说明：

使用的框架：scikit-learn、XGBoost
CPU训练，无GPU加速
---

## 4. 实验设计与结果分析

### 4.1 数据集划分与评估指标

训练 / 验证 / 测试划分方式：

随机划分比例：80%训练集，20%测试集
未使用多次随机划分
评价指标：

分类任务：Accuracy、F1、AUC
选择这些指标的原因：准确率衡量总体预测效果，F1分数平衡精确率和召回率，AUC衡量模型区分能力

### 4.2 结果展示（表格与图形）

模型对比表：各模型在验证/测试集上的指标汇总

模型	Accuracy	F1	AUC
Logistic Regression	0.6842	0.5000	0.7581
XGBoost	0.7018	0.4138	0.7392
重要特征排序图：
![Logistic Regression Feature Importance](./figures/feature_importance_LogisticRegression.png)Logistic Regression特征重要性排序

1.rating_value (1.387)
2.rating_location (1.194)
3.rating_overall (0.769)
4.rating_accuracy (0.494)

![XGBoost Feature Importance](./figures/feature_importance_XGBoost.png)
XGBoost特征重要性排序
1.total_reviews (0.215)
2.rating_value (0.131)
3.rating_overall (0.127)

关键关系可视化：
![Correlation Heatmap](./figures/correlation_heatmap.png)相关性热力图显示了各评分维度之间的强相关性（如rating_overall与rating_accuracy相关系数达0.889），以及评分与RevPAR和入住率的关系

![Joint Impact Analysis](./figures/joint_impact_analysis.png)联合影响分析图展示了评分和评论数量的不同组合对RevPAR和入住率的影响，其中高评分且高评论数的房源具有最高的RevPAR均值（153.51）


![Confusion Matrix - Logistic Regression](./figures/confusion_matrix_Logistic%20Regression.png)
![Confusion Matrix XGBoost](./figures/confusion_matrix_XGBoost.png)
混淆矩阵图显示了两个模型的分类性能，帮助理解模型的预测准确性和错误类型

现象：
相关性热力图显示评分维度高度相关，表明它们相互影响
联合影响图显示高评分与高评论数的组合对房源表现有最强的正向影响
特征重要性图揭示了不同模型对特征重要性的不同看法
混淆矩阵显示了模型在分类任务中的精确度和召回率表现

### 4.3 结果分析与业务解读

对不同模型表现的分析：
XGBoost模型在Accuracy方面表现略好（70.18% vs 68.42%），但在F1分数方面不如逻辑回归（41.38% vs 50.00%）
逻辑回归在AUC方面表现更好（0.758 vs 0.739），说明在区分高收益房源方面更有优势
两模型均未出现严重的过拟合现象，因为交叉验证结果与测试集结果相近

联系：
根据重要特征，"高收益房源"的典型画像为：高性价比评分、高整体评分、高位置评分的房源
评论数量对XGBoost模型更重要，说明评论数量与房源表现存在复杂的非线性关系
对房东或平台提出可操作的建议：
1.提升性价比评分是增加收益的关键因素
2.重视位置评分，地理位置仍是影响收益的重要因素
3.积累评论数量有助于提升房源表现，特别是对于XGBoost模型而言
---

## 5. 结论与不足

### 5.1 主要结论

性价比评分(rating_value)对RevPAR影响最大，在逻辑回归模型中重要性排名第一
评论数量(total_reviews)对XGBoost模型预测更为重要，显示其在非线性关系中的作用
高评分与高评论数量的组合对房源表现有最强的正向影响（RevPAR均值达153.51）
XGBoost模型在准确率方面表现最佳（70.18%），但逻辑回归在AUC方面略胜一筹（0.758 vs 0.739）
### 5.2 不足与改进方向
数据层面的不足：
样本量相对较小，可能影响模型泛化能力
缺乏评论文本内容，无法分析评论情感对表现的影响
没有考虑季节性和时间因素对房源表现的影响

方法层面的不足：
未充分利用文本信息（评论内容），仅使用了评论数量
特征工程较为简单，没有创建更多组合特征
模型调参不够深入，使用了默认参数

未来可以尝试的改进方向：
使用NLP技术分析评论文本的情感倾向
引入时间序列分析，考虑季节性因素
尝试更复杂的集成模型或深度学习方法
增加更多外部特征（如当地活动、旅游景点距离等）

---

## 6. 小组协作与个人收获

### 6.1 分工与协作情况
小组整体的合作方式：
通过GitHub进行代码版本控制，使用分支开发功能
定期开会讨论项目进展，分配任务
使用issue跟踪问题和待办事项

### 6.2 个人收获（每人 3–5 句话）


- 学生 1：通过参与代码开发、数据处理和EDA工作，我深入掌握了数据科学项目从数据清洗到可视化分析的完整流程。在探索房源评分与表现关系的过程中，我学会了如何运用相关性分析和可视化技术揭示数据背后的业务洞察。此外，团队协作让我认识到项目管理和沟通的重要性。
- 学生 2：在代码开发、报告撰写和PPT制作过程中，我提升了技术文档编写能力和演示技巧。通过参与模型评估和结果分析，我加深了对机器学习评估指标的理解。这次项目也让我体会到团队合作中协调不同任务和进度安排的挑战与收获。
- 学生 3：在特征工程和建模环节，我学习了如何选择和应用不同的机器学习算法，并比较它们的效果。通过分析特征重要性，我理解了不同特征对模型预测的贡献。这次实践让我更深刻地认识到理论知识与实际应用之间的联系。
- 学生 4：通过工程实现和代码开发工作，我提升了Python编程技能和数据处理能力。在项目实施过程中，我学会了如何调试代码和解决技术问题。这次经历让我更加理解了数据科学项目的工程化实现和可复现性的重要性。

---

## 7. 附录（可选）

主要代码结构说明：
src/: 包含主训练脚本main.py和工具函数utils.py
data/: 存放原始数据集
models/: 保存训练好的模型文件
reports/: 生成的报告、图表和数据结果
reports/figures/: 生成的可视化图表文件
reports/data/: 生成的分析数据文件

关键函数/脚本的说明：
train_baseline(): 训练逻辑回归基线模型
train_improved(): 训练XGBoost改进模型
load_airbnb_data(): 数据加载和预处理函数
plot_feature_importance(): 绘制特征重要性图
plot_correlation(): 生成相关性热力图
plot_joint_impact(): 生成联合影响分析图

运行项目的简要步骤：
1.安装依赖（如 pip install -r requirements.txt）
2.将数据文件房源级分析数据集.csv放置到data/目录
3.运行 python src/main.py --data-path data/房源级分析数据集.csv --output-dir reports --models-dir models
4.查看生成的图表和结果文件

额外图表、补充分析等：
相关性热力图显示了各评分维度之间的强相关性（如rating_overall与rating_accuracy相关系数达0.889）
联合影响分析图展示了评分和评论数量的不同组合对RevPAR和入住率的影响
特征重要性图揭示了不同模型对特征重要性的不同看法
混淆矩阵图展示了模型在分类任务中的性能表现
数据统计详情见reports/data/目录下的CSV文件，包括特征重要性、模型对比、联合影响统计数据等
