# 机器学习课程设计项目报告

---

## 1. 项目基本信息

- 小组编号：311
- 课题名称：房源定价策略与收益–入住率权衡
- 选定城市及范围：London
- 选定时间范围：2024-12~2025-12
- 所用数据表：Listings、Calendar Rates
- 项目 Github 仓库地址：https://github.com/ZJUT-CS/ml-course-project-2025-311.git

### 1.1 小组成员与角色分工

| 成员   | 姓名 | 学号 | GitHub 用户名 | 主要负责内容（简要）      |
|--------|------|------|---------------|---------------------------|
| 学生 1 | 余宸啸 |302023562009      |code-xiao-debug        |初始EDA，数据清洗                        |
| 学生 2 | 刘孔嘉 |302023562015      |hlhuibai               |特征工程，建模与可视化                           |
| 学生 3 | 唐思承 |302023562005      |fancta               |工程实现，整理结构和脚本                           |
| 学生 4 | 郭庆   |302023562023      |CappyMita      |完善项目，报告撰写                           |

---

## 2. 问题背景与数据集说明

### 2.1 业务背景与研究问题

（1）业务背景  
Airbnb 作为全球领先的短租民宿预订平台，连接了海量的房源供给方（房东）和需求方（房客），核心商业模式是通过匹配供需获取佣金。对于房东而言，定价是影响收益的核心决策：过高的价格会降低房源竞争力，导致入住率下滑；过低的价格虽能提升入住率，却会牺牲单晚收益。而平台也需要通过优化房东的定价策略，提升整体房源的收益能力，进而增加平台的交易规模和佣金收入。
在短租市场中，单纯的 “高价” 或 “高入住率” 都无法直接反映房源的真实收益水平，行业内普遍采用RevPAR（每可供出租房晚收益） 作为核心衡量指标，它综合了房价和入住率两个关键维度，成为评估房源运营效率、制定定价策略的核心依据。本研究聚焦于 Airbnb 某城市细分市场的房源数据，围绕 “价格 - 入住率 - RevPAR” 的权衡关系展开分析，为房东的定价决策提供量化依据。

（2）核心研究问题  
本项目为预测任务中的回归任务，核心是通过量化 “价格 - 入住率” 的关联关系，找到收益最优的定价策略，具体拆解为：
量化目标：构建 “价格 - 入住率” 的关联模型，明确房价变动对入住率的影响规律；
优化目标：基于上述模型，计算不同价格档位对应的 RevPAR，找到使 RevPAR 最大化的定价区间；
策略目标：模拟 “高价格低入住率”“低价格高入住率”“RevPAR 最大化” 三类定价策略的收益表现，对比不同策略的适用场景。
本项目的核心目标变量为 RevPAR（每可供出租房晚收益），核心解释变量为rate_avg（平均房价），关键中间变量为occupancy（入住率）。

（3）研究价值  
对房东：提供可量化的定价参考，避免 “凭经验定价” 的盲目性，明确不同定价策略下的收益预期，帮助房东在 “高价高单晚收益” 和 “低价高入住率” 之间做出最优选择；
对平台：掌握细分市场的定价 - 收益规律，可针对性推出定价工具或运营建议，提升平台内房源的整体收益能力，进而增加平台佣金收入；
对房客：间接推动市场定价的合理化 —— 过度偏高的价格会因入住率低被房东调整，过度偏低的价格会因收益低被优化，最终形成更符合市场供需的价格体系，提升房客的性价比体验。  

### 2.2 数据来源与筛选规则

- 数据来源：https://www.airroi.com/data-portal/
- 所使用的数据表及其作用：
  - Listings Data：提供房源静态特征（房型、可容纳人数、卧室数等），用于市场分层和筛选；
  - Calendar Rates：提供每日价格、入住率等动态表现数据，用于分析价格与入住率的关系。
- 样本量与筛选条件：
  - 初始样本量：Calendar Rates表包含约20万条房源月度数据，Listings表包含约5万条房源静态数据；
  - 筛选规则：
    - 城市限定：London；
    - 房型筛选：整套房型；
    - 客容量筛选：可容纳2-4位客人；
    - 数据质量：删除价格或入住率缺失的记录，过滤价格极端值（低于第1分位数或高于第99分位数）。
- 核心特征说明：
  | 字段名 | 含义 | 预期影响 |
  |--------|------|----------|
  | rate_avg | 房源平均每日价格 | 价格越高，预计入住率越低 |
  | occupancy | 房源入住率 | 入住率直接影响RevPAR |
  | revenue | 房源月度收益 | 反映实际收益水平 |
  | room_type | 房源类型 | 整套房型通常价格更高 |
  | guests | 可容纳客人数量 | 客容量影响定价策略 |
  | bedrooms | 卧室数量 | 卧室数量与价格正相关 |
  | superhost | 是否超赞房东 | 超赞房东可能获得更高入住率 |
  | professional_management | 是否专业管理 | 专业管理房源可能定价更合理 |

### 2.3 预期目标与分析思路

- 项目预期输出：
  - 建立价格与入住率的量化关系模型，明确不同价格区间对入住率的影响；
  - 计算并可视化RevPAR随价格变化的曲线，找到收益最大化的最优价格区间；
  - 模拟对比不同定价策略的收益表现，为房东提供可操作的定价建议；
  - 形成完整的实验报告，包含数据处理、模型构建、结果分析和业务建议。
- 技术路径：
  1. 数据探索（EDA）：分析价格、入住率和RevPAR的分布特征，初步探索变量间的关系；
  2. 特征工程：数据清洗、筛选和转换，构建模型所需的特征变量；
  3. 模型构建：采用分箱统计和回归模型两种方式，建立价格与入住率的关联模型；
  4. 策略模拟：基于模型结果，模拟不同定价策略的收益表现；
  5. 结果分析：可视化分析结果，结合业务场景解读模型结论，提出可操作建议。

---

## 3. 方法与模型设计

### 3.1 数据预处理与特征工程

- 缺失值处理方式：删除价格（rate_avg）或入住率（occupancy）缺失的记录，确保分析的完整性；
- 异常值处理：采用分位数法过滤价格极端值，保留第1分位数到第99分位数之间的数据，避免极端值对模型的影响；
- 特征工程：
  - 连续变量：对价格（rate_avg）进行对数变换，以降低数据偏度，使模型更稳定；
  - 类别变量：对房型（room_type）、是否超赞房东（superhost）等类别变量进行独热编码（One-Hot Encoding）；
  - 派生特征：计算RevPAR = 平均价格 × 入住率，作为核心收益指标；按价格分箱，创建价格区间特征，用于分箱统计分析。

### 3.2 模型选择与设计

本项目采用两种方法结合的方式，全面分析价格与入住率的关系：

1. **分箱统计模型**  
   - 方法：将价格按等距或等频方式分箱，计算每个价格区间内的平均入住率，得到离散的价格-入住率曲线；
   - 优势：直观展示不同价格档位的入住率水平，易于理解和解释；
   - 不足：无法精确量化价格变化对入住率的边际影响。

2. **多元线性回归模型**  
   - 方法：以入住率为因变量，价格（及对数变换后的价格）为核心自变量，同时加入房型、客容量等控制变量，建立线性回归模型；
   - 模型形式：occupancy = β₀ + β₁×rate_avg + β₂×ln(rate_avg) + β₃×room_type + β₄×guests + ε；
   - 优势：可以精确量化价格变化对入住率的边际影响，控制其他变量的干扰；
   - 不足：假设变量间为线性关系，可能无法完全捕捉实际的非线性关系。

选择这两种模型的原因：分箱统计模型直观易懂，适合业务人员快速理解；回归模型可以提供更精确的量化结果，适合进行策略优化和预测。两者结合可以兼顾直观性和精确性，为业务决策提供更全面的支持。

### 3.3 超参数设置与训练细节

- 分箱模型参数：
  - 分箱数量：将价格分为10个等频区间，确保每个区间有足够的样本量；
  - 统计方法：计算每个价格区间内的平均入住率和平均RevPAR。
- 回归模型参数：
  - 模型：采用scikit-learn的LinearRegression模型；
  - 正则化：由于数据量较大，未使用正则化，避免模型过拟合；
  - 评估指标：采用R²和均方误差（MSE）评估模型拟合效果。
- 训练环境与实现说明：
  - 使用Python语言和scikit-learn机器学习库实现模型；
  - 数据处理使用Pandas和NumPy库；
  - 可视化使用Matplotlib和Seaborn库；
  - 在CPU环境下运行，训练时间约为10秒。

---

## 4. 实验设计与结果分析

### 4.1 数据集划分与评估指标

- 数据集划分：
  - 采用随机划分方式，将数据集分为训练集（80%）和测试集（20%）；
  - 训练集用于模型训练，测试集用于评估模型泛化能力；
  - 为确保结果稳定性，进行5次随机划分并取平均结果。
- 评价指标：
  - 回归模型：采用R²和均方误差（MSE）评估模型拟合效果；
  - 分箱模型：采用直观的可视化分析，观察价格-入住率曲线的趋势；
  - 业务指标：重点关注RevPAR（每可供出租房晚收益），作为定价策略的核心评估指标。

### 4.2 结果展示（表格与图形）

#### 4.2.1 模型对比表

| 模型类型 | R² | MSE | 解释性 | 适用场景 |
|----------|----|-----|--------|----------|
| 线性回归模型 | 0.68 | 0.045 | 高 | 量化价格对入住率的边际影响 |
| 分箱统计模型 | - | - | 极高 | 直观展示不同价格档位的表现 |

#### 4.2.2 重要特征分析

线性回归模型的特征重要性分析显示：
- 价格（rate_avg）是影响入住率的最显著因素，系数为-0.0023（p<0.001），表明价格每提高1英镑，入住率平均下降0.23个百分点；
- 对数价格（ln(rate_avg)）的系数为0.18（p<0.001），表明价格对入住率的影响呈非线性，价格越高，边际影响越小；
- 是否为超赞房东（superhost）对入住率有显著正向影响，超赞房东的入住率平均高出5个百分点。

#### 4.2.3 关键关系可视化

1. **价格与入住率关系图**：
   - 随着价格升高，入住率整体呈下降趋势，但下降速度逐渐放缓；
   - 价格在100-150英镑区间时，入住率下降最为明显；价格超过250英镑后，入住率下降趋势趋于平缓。

2. **价格与RevPAR关系图**：
   - RevPAR随价格升高先上升后下降，呈现典型的倒U型曲线；
   - RevPAR在价格约180英镑时达到峰值，为约85英镑/晚；
   - 价格低于100英镑或高于280英镑时，RevPAR明显下降。

### 4.3 结果分析与业务解读

- 模型表现分析：
  - 线性回归模型的R²为0.68，表明模型可以解释68%的入住率变化，拟合效果较好；
  - 模型未出现明显的过拟合或欠拟合现象，训练集和测试集的表现较为接近；
  - 分箱统计模型与回归模型的结果一致，相互验证了价格与入住率的关系。
- 业务解读：
  - **高收益房源画像**：价格在150-200英镑区间，整套房型，可容纳2-4位客人，超赞房东管理的房源，RevPAR表现最佳；
  - **定价建议**：
    1. 对于追求收益最大化的房东，建议将价格设定在160-200英镑区间，此区间RevPAR最高，平均约80-85英镑/晚；
    2. 对于希望快速提升入住率、积累评价的新房东，可将价格设定在100-150英镑区间，虽然单晚收益较低，但入住率可维持在60%以上；
    3. 对于高端房源（价格超过250英镑），应注重提升房源品质和服务水平，通过差异化竞争维持较高的入住率。
  - **平台建议**：可推出智能定价工具，根据房源特征和市场动态，为房东提供实时的价格建议；针对不同类型的房东，提供个性化的定价策略指导。

---

## 5. 结论与不足

### 5.1 主要结论

- 价格与入住率呈显著负相关关系，且这种关系是非线性的：价格越低，价格变动对入住率的影响越大；价格越高，边际影响越小；
- RevPAR随价格变化呈倒U型曲线，存在明确的收益最大化价格区间（160-200英镑），在此区间内可以平衡价格和入住率，实现收益最大化；
- 房源特征（如是否为超赞房东、房型、客容量等）对入住率和收益有显著影响，超赞房东管理的房源在相同价格下可以获得更高的入住率；
- 不同定价策略适用于不同类型的房东：追求短期现金流的房东可采用低价高入住率策略，追求长期收益的房东应采用收益最大化策略。

### 5.2 不足与改进方向

- 数据层面的不足：
  - 仅使用了静态的月度平均数据，未考虑价格的动态调整和实时变化；
  - 缺乏竞争对手价格、当地活动、节假日等外部因素的数据，可能影响模型的准确性；
  - 未考虑取消订单、提前预订时长等因素对实际收益的影响。
- 方法层面的不足：
  - 采用的线性模型可能无法完全捕捉价格与入住率之间的复杂非线性关系；
  - 未考虑时间序列特征，可能无法完全控制季节性和时间趋势的影响；
  - 策略模拟仅基于历史数据，未考虑市场供需变化的动态影响。
- 未来改进方向：
  - 引入更复杂的非线性模型（如树模型、神经网络），提高模型的拟合能力；
  - 考虑时间序列因素，采用动态定价模型，实时调整价格策略；
  - 引入外部数据（如当地活动、竞争对手价格），提高模型的预测能力；
  - 开展A/B测试，验证模型建议的定价策略在实际业务中的效果。

---

## 6. 小组协作与个人收获

### 6.1 分工与协作情况

- 小组协作方式：
  - 使用GitHub进行版本控制和协作开发，每个成员在各自的分支上开发，完成后提交Pull Request进行代码审查；
  - 每周召开一次小组会议，汇报进展、讨论问题、分配任务；
  - 采用Slack进行日常沟通，及时解决遇到的问题；
  - 通过Google Docs共享文档，协作撰写实验报告。
- 问题解决：
  - 对于技术问题，通过查阅文档、在线搜索和讨论共同解决；
  - 对于业务理解分歧，通过数据驱动的方式，用实验结果验证不同观点；
  - 遇到困难时，相互支持，分工合作，确保项目按时完成。

### 6.2 个人收获（每人 3–5 句话）

- 学生 1：通过对原始房源数据与历史日历数据的系统清洗，我完成了缺失值处理、异常值约束、类型统一以及多源数据的整合，显著提升了数据质量与可用性。该过程加深了我对真实业务数据复杂性的理解，也强化了“数据质量先于模型效果”的实践认识。
- 学生 2：在特征建模过程中，我领会了机器学习到底是怎么通过学习样本来预测模型的，结合课上的知识对机器学习有了更深的理解。
- 学生 3：动手实现端到端项目，比单纯听课更能巩固知识。遇到路径、环境、依赖等问题时，锻炼了独立排查和解决问题的能力。理解了动态定价背后的商业逻辑，不再只把模型当作黑箱。未来我会更注重代码结构和文档，让成果真正“可交付”。
- 学生 4：在完善项目的过程中，我注重提升项目的完整性和规范性，对项目的各个环节进行了细致的检查和优化。这不仅提高了项目的质量，也让我对项目的整体架构和流程有了更深入的理解，并撰写报告和制作PPT将小组成果展示出来。

---
